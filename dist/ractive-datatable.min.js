!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@databank/ractive-datatable",[],e):"object"==typeof exports?exports["@databank/ractive-datatable"]=e():t["@databank/ractive-datatable"]=e()}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);i(1);e.default=Ractive.extend({columns_length(){return this.get("columns").filter((function(t){return"string"==typeof t||"object"==typeof t&&!0!==t.hide})).length},template:"\n\t\t<div class='databank-datatable theme-{{theme}}' style='{{style}}'>\n\t\t\t<div class='tabledatahead'>\n\t\t\t\t{{#if checkboxes}}\n\t\t\t\t\t<div style='width: {{checkbox_width}}px'>\n\t\t\t\t\t\t{{#if multiselect}}\n\t\t\t\t\t\t<input class='input-checkbox' type='checkbox' checked={{selectall}} >\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t</div>\n\t\t\t\t{{/if}}\n\n\t\t\t\t{{#columns:i}}\n\t\t\t\t\t{{#if (typeof . === \"object\") && (.hide === true) }}\n\t\t\t\t\t{{else}}\n\t\t\t\t\t\t<div style='width:{{#if checkboxes }}calc( 100%/{{ @this.columns_length() }} - {{ Math.ceil( ~/checkbox_width / @this.columns_length() ) }}px ){{else}}{{Math.floor(100/ @this.columns_length()  )}}%{{/if}}'>\n\t\t\t\t\t\t\t{{#if typeof . === \"object\"}}\n\t\t\t\t\t\t\t\t{{.display}}\n\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t{{.}}\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/if}}\n\t\t\t\t{{/columns}}\n\t\t\t</div>\n\t\t\t<div class='tabledatacontent'>\n\n\t\t\t\t{{#if rows.length === 0}}\n\t\t\t\t\t<br><small>Empty</small>\n\t\t\t\t{{/if}}\n\t\t\t\t{{#if rows === null }}\n\t\t\t\t\t<br><small>Loading...</small>\n\t\t\t\t{{/if}}\n\n\t\t\t\t{{#if err.errorMessage }}\n\t\t\t\t\t<br><small style=\"color:red\">{{err.errorMessage}}</small>\n\t\t\t\t{{/if}}\n\n\t\t\t\t{{#rows:row}}\n\n\n\t\t\t\t<div class='tabledatarow {{#if ~/selection[row].selected}}selected{{/if}}' on-click='selectrow'>\n\t\t\t\t\t{{#if checkboxes}}\n\t\t\t\t\t\t<div class='tabledatacell check' style=\"width: {{checkbox_width}}px;\" on-click=\"selectcell\">\n\t\t\t\t\t\t\t<input class='input-checkbox' type='checkbox' checked={{~/selection[row].selected}} >\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/if}}\n\n\t\t\t\t\t{{#columns:i}}\n\t\t\t\t\t\t{{#if (typeof . === \"object\") && (.hide === true) }}\n\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle='width:{{#if checkboxes }}calc( 100%/{{ @this.columns_length() }} - {{ Math.ceil( ~/checkbox_width / @this.columns_length() ) }}px ){{else}}{{Math.floor(100/ @this.columns_length() )}}%{{/if}}'\n\t\t\t\t\t\t\t\tclass='tabledatacell\n\n\t\t\t\t\t\t\t\t{{#if .editable === true }}e{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/selection[row].cols[i].editing }}editing{{/if}}\n\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('KEY')  }}t-K{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('HREF') }}t-HASH{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('S')    }}t-S{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('N')    }}t-N{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('BOOL') }}t-BOOL{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('B')    }}t-B{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('NULL') }}t-NULL{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('L')    }}t-L{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('M')    }}t-M{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('SS')   }}t-SS{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('NS')   }}t-NS{{/if}}\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('BS')   }}t-BS{{/if}}\n\t\t\t\t\t\t\t\t{{#if .U}}t-U{{/if}}\n\t\t\t\t\t\t\t\t'\n\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('HREF') }}on-click='@this.hrefclick( ~/rows[row], . )'{{/if}}\n\n\t\t\t\t\t\t\t\t{{#if (.editable === true) && ~/rows[row][.field].hasOwnProperty('S')    }}on-dblclick='@this.clicktoedit( row, i )'{{/if}}\n\t\t\t\t\t\t\t\t{{#if (.editable === true) && ~/rows[row][.field].hasOwnProperty('N')    }}on-dblclick='@this.clicktoedit( row, i )'{{/if}}\n\t\t\t\t\t\t\t\t{{#if (.editable === true) && ~/rows[row][.field].hasOwnProperty('BOOL') }}on-dblclick='@this.clicktoedit( row, i )'{{/if}}\n\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{#if typeof . === \"object\"}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('HREF') }}<a>{{~/rows[row][.field].display || ~/rows[row][.field].HREF}}</a>{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('S')    }}\n\t\t\t\t\t\t\t\t\t\t{{#if ~/selection[row].cols[i].editing }}\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" value={{~/rows[row][.field].S}} on-blur='@this.editfocusout( row, i )' />\n\t\t\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t\t\t{{ ~/rows[row][.field].S    }}\n\t\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('N')    }}\n\t\t\t\t\t\t\t\t\t\t{{#if ~/selection[row].cols[i].editing }}\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"number\" value={{~/rows[row][.field].N}} on-blur='@this.editfocusout( row, i )' />\n\t\t\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t\t\t{{ ~/rows[row][.field].N    }}\n\t\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t\t{{/if}}\n\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('BOOL') }}\n\t\t\t\t\t\t\t\t\t\t{{#if ~/selection[row].cols[i].editing }}\n\t\t\t\t\t\t\t\t\t\t\t<select value={{ ~/rows[row][.field].BOOL }} on-blur='@this.editfocusout( row, i )' >\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"true\">true</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"false\">false</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t\t\t{{ ~/rows[row][.field].BOOL }}\n\t\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('B')    }}binary{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('NULL') }}NULL{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('L')    }}[...]{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('M')    }}{...}{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('SS')   }}StringSet{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('NS')   }}NumberSet{{/if}}\n\t\t\t\t\t\t\t\t\t{{#if ~/rows[row][.field].hasOwnProperty('BS')   }}BinarySet{{/if}}\n\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t{{.}}\n\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{/columns}}\n\n\t\t\t\t</div>\n\n\n\n\t\t\t\t{{/rows}}\n\t\t\t</div>\n\t\t</div>\n\t\t",data:function(){return{selectall:!1,checkbox_width:28,selection:[]}},hrefclick(t,e){this.fire("href",this,t,e)},clicktoedit(t,e){this.set("selection.*.cols.*.editing",!1),this.set("selection."+t+".cols."+e+".editing",!0);try{this.el.getElementsByTagName("select")&&this.el.getElementsByTagName("select")[0].focus()}catch(t){}try{this.el.querySelectorAll("input[type=number]")&&this.el.querySelectorAll("input[type=number]")[0].focus()}catch(t){}try{this.el.querySelectorAll("input[type=text]")&&this.el.querySelectorAll("input[type=text]")[0].focus()}catch(t){}},editfocusout(t,e){this.set("selection."+t+".cols."+e+".editing",!1)},select_event(){var t=this,e=[];this.get("selection").map((function(i,n,o){!0===i.selected&&e.push(t.get("rows."+n))}));this.fire("select",e)},select_all(){this.set("selection",this.get("selection").map((function(t){return{selected:!0}}))),this.select_event()},select_none(){this.set("selection.*.selected",!1),this.select_event()},on:{init(){this.observe("selectall",(function(t,e,i){if(t)return this.set("selection",this.get("selection").map((function(t){return{selected:!0}}))),void this.select_event();this.set("selection.*.selected",!1),this.select_event()}),{init:!1})},selectcell(t){var e=t.resolve().split("rows").join("selection"),i=this.get(e+".selected");!1!==this.get("multiselect")||this.set("selection.*.selected",!1),i?this.set(e+".selected",!1):this.set(e+".selected",!0),this.select_event()}}})},function(t,e,i){}]).default}));